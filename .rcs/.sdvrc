#!/bin/bash

export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm

export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-14.0.2.jdk/Contents/Home
export ANDROID_HOME=/usr/local/share/android-sdk
export ANDROID_SDK_ROOT=$ANDROID_HOME
export PATH=$JAVA_HOME:$ANDROID_HOME/emulator:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools:$ANDROID_SDK_ROOT:$PATH


RN() {
    case "$2" in
        android) run_android $1
            ;;
        ios) run_ios $1
            ;;
    esac
}

run_android() {
    case "$1" in
        bambam)
            variant='bamGoogleDebug'
            tld='chat'
            ;;
        *)
            variant='datingGoogleDebug'
            tld='com'
            ;;
    esac
    CMD="cd ~/sdv/$1/dating-mobile && node ~/sdv/$1/dating-mobile/node_modules/.bin/react-native run-android --variant $variant --appId $tld.$1.android --no-packager"
    echo $CMD
    eval $CMD
}

run_ios() {
    case "$1" in
        bambam)
            configuration='BamBam.Debug'
            ;;
        *)
            configuration='Dating.Debug'
            ;;
    esac
    CMD="cd ~/sdv/$1/dating-mobile && node ~/sdv/$1/dating-mobile/node_modules/.bin/react-native run-ios '--simulator=iPhone 11' --configuration=$configuration --no-packager"
    echo $CMD
    eval $CMD
}
